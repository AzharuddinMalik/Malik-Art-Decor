<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MAD Associates ‚Äì P.O.P & Gypsum Specialists 2025</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300..700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <style>
        /* --- ENHANCED STYLES --- */

        /* Root Variables for Theming */
        :root {

            /* New Vibrant Color Theme */
            --clr-bg-light: #f5f7fa;
            --clr-text-light: #1a1a1a;
            --clr-card-bg-light: #ffffff;
            --clr-border-light: #e0e6ed;
            --clr-nav-bg-light: rgba(255, 255, 255, 0.98);
            --clr-nav-border-light: rgba(0, 0, 0, 0.1);
            --clr-nav-link-hover-bg-light: rgba(255, 107, 53, 0.1);

            --clr-bg-dark: #0f141f;
            --clr-text-dark: #e9ecef;
            --clr-card-bg-dark: #1e2a38;
            --clr-border-dark: #2c3e50;
            --clr-nav-bg-dark: rgba(15, 20, 31, 0.98);
            --clr-nav-border-dark: #34495e;
            --clr-nav-link-hover-bg-dark: rgba(46, 204, 113, 0.1);

            /* Accent Colors */
            --clr-primary: #1e4d72; /* Deep Blue */
            --clr-accent: #87ceeb; /* Sky Blue */
            --clr-accent-1: #ff6b35;
            --clr-secondary: #3498db; /* Bright Blue */
            --clr-accent-hover: #c0392b; /* Darker Red */


            /* Typography */
            --font-display1: 'Playfair Display', serif;
            --font-display2: 'Poppins', sans-serif;
            --font-body: 'Open Sans', sans-serif;

            /* Spacing & Sizing */
            --navbar-height: 80px;
            --section-padding: 5rem;
            --card-radius: 12px;
            --transition-speed: 0.3s;
            --transition: all 0.3s ease;
        }


        /* --- CORE STYLES --- */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-body),serif;
            background-color: var(--clr-bg-light);
            color: var(--clr-text-light);
            scroll-behavior: smooth;
            line-height: 1.6;
            transition: background-color, color var(--transition-speed) ease;
        }

        body[data-theme="dark"] {
            background-color: var(--clr-bg-dark);
            color: var(--clr-text-dark);
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: var(--font-display1),serif;
            color: var(--clr-primary); /* Default for light theme */
        }

        body[data-theme="dark"] h1,
        body[data-theme="dark"] h2,
        body[data-theme="dark"] h3,
        body[data-theme="dark"] h4,
        body[data-theme="dark"] h5,
        body[data-theme="dark"] h6 {
             color: var(--clr-accent); /* Accent for dark theme */
        }

        a {
            text-decoration: none;
        }

        .container {
            max-width: 1200px;
        }

        .section-title {
            color: var(--clr-primary);
            margin-bottom: 3rem;
            position: relative;
            text-align: center;
        }

        body[data-theme="dark"] .section-title {
            color: var(--clr-accent);
        }

        .section-title::after {
            content: '';
            width: 80px;
            height: 4px;
            background: linear-gradient(135deg, var(--clr-primary), var(--clr-secondary));
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 2px;
        }

        body[data-theme="dark"] .section-title::after {
             background: linear-gradient(135deg, var(--clr-accent), var(--clr-secondary));
        }

        /* --- NAVIGATION --- */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1030;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 1.5rem;
            background: var(--clr-nav-bg-light);
            backdrop-filter: blur(12px);
            transition: all var(--transition-speed) ease;
            border-bottom: 1px solid var(--clr-nav-border-light);
        }

        body[data-theme="dark"] .navbar {
            background: var(--clr-nav-bg-dark);
            border-bottom: 1px solid var(--clr-nav-border-dark);
        }

        .navbar.scrolled {
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
            background: rgba(255, 255, 255, 0.98);
        }

        body[data-theme="dark"] .navbar.scrolled {
            background: rgba(18, 18, 18, 0.98);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.3);
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            text-decoration: none;
            color: var(--clr-primary);
            font-weight: 700;
            order: 1;
        }

        body[data-theme="dark"] .navbar-brand {
             color: var(--clr-accent);
        }

        .brand-content {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .brand-icon {
            background: linear-gradient(135deg, var(--clr-primary), var(--clr-secondary));
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .brand-icon i {
            font-size: 1.2rem;
            color: white;
        }

        .brand-text h4 {
            font-size: calc(1.275rem + .3vw);
            font-weight: 700;
            margin: 0;
            line-height: 1.1;
            color: var(--clr-primary);
        }

        body[data-theme="dark"] .brand-text h4 {
            color: var(--clr-accent);
        }

        .brand-text small {
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--clr-secondary);
            text-transform: uppercase;
            letter-spacing: 1.5px;
            display: block;
        }

        .navbar-nav {
            display: flex;
            gap: 1rem;
            list-style: none;
            margin: 0;
            padding: 0;
            order: 2;
        }

        .nav-link {
            color: var(--clr-text-light);
            font-weight: 500;
            font-size: 0.95rem;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all var(--transition-speed) ease;
            text-decoration: none;
            display: block;
        }

        body[data-theme="dark"] .nav-link {
            color: var(--clr-text-dark);
        }

        .nav-link:hover {
            color: var(--clr-primary);
            background: var(--clr-nav-link-hover-bg-light);
        }

        body[data-theme="dark"] .nav-link:hover {
            color: var(--clr-accent);
            background: var(--clr-nav-link-hover-bg-dark);
        }

        .navbar-controls {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            order: 3;
        }

        .theme-toggle {
            background: none;
            border: none;
            cursor: pointer;
            width: 36px;
            height: 36px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--clr-primary);
            transition: all var(--transition-speed) ease;
        }

        body[data-theme="dark"] .theme-toggle {
            color: var(--clr-accent);
        }

        .theme-toggle:hover {
            background: rgba(30, 77, 114, 0.1);
            transform: scale(1.05);
        }

        body[data-theme="dark"] .theme-toggle:hover {
            background: rgba(135, 206, 235, 0.1);
        }

        .navbar-toggler {
            padding: 0.25rem;
            font-size: 1rem;
            line-height: 1;
            background: transparent;
            border: 1px solid var(--clr-primary);
            border-radius: 6px;
            width: 36px;
            height: 36px;
            display: none;
            align-items: center;
            justify-content: center;
            color: var(--clr-primary);
            cursor: pointer;
        }

        body[data-theme="dark"] .navbar-toggler {
            border-color: var(--clr-accent);
            color: var(--clr-accent);
        }

        .navbar-toggler-icon {
            background-image: none;
            width: 18px;
            height: 18px;
            position: relative;
        }

        .navbar-toggler-icon::before {
            content: '';
            position: absolute;
            width: 18px;
            height: 2px;
            background: currentColor;
            top: 50%;
            left: 0;
            transform: translateY(-50%);
            box-shadow: 0 -6px 0 currentColor, 0 6px 0 currentColor;
            transition: all 0.3s ease;
        }

        .navbar-toggler[aria-expanded="true"] .navbar-toggler-icon::before {
            transform: translateY(-50%) rotate(45deg);
            box-shadow: 0 0 0 currentColor, 0 0 0 currentColor;
        }

        .navbar-toggler[aria-expanded="true"] .navbar-toggler-icon::after {
            content: '';
            position: absolute;
            width: 18px;
            height: 2px;
            background: currentColor;
            top: 50%;
            left: 0;
            transform: translateY(-50%) rotate(-45deg);
        }

        .navbar-collapse {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--clr-nav-bg-light);
            backdrop-filter: blur(12px);
            border-top: 1px solid var(--clr-nav-border-light);
            padding: 1rem 1.5rem;
        }

        body[data-theme="dark"] .navbar-collapse {
            background: var(--clr-nav-bg-dark);
            border-top: 1px solid var(--clr-nav-border-dark);
        }

        .navbar-collapse.show {
            display: block;
        }

         /* ============================= GRID CONTAINER ====================================== */
        .hero-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2.5rem;
            align-items: center;
            position: relative;
            min-height: 100vh;
            padding: calc(5rem + 80px) 2rem 3rem;
            background: url('https://images.unsplash.com/photo-1504307651254-35680f356dfd?auto=format&fit=crop&w=1350&q=80') center/cover fixed;
            overflow: hidden;
        }

        .hero-grid::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(135deg, rgba(30, 77, 114, 0.7), rgba(122, 155, 184, 0.7));
            z-index: 0;
        }

        .hero-grid .hero-bg {
            position: absolute;
            inset: -10%;
            background: inherit;
            transform: scale(1.1);
            filter: blur(4px);
            z-index: -1;
            transition: transform 0.6s ease;
        }

        .hero-grid:hover .hero-bg {
            transform: scale(1.15);
        }

        /* ============================ SHARED GLASS CARD ================================== */
        .glass {
            position: relative;
            z-index: 1;
            padding: 2.5rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 1.5rem;
            color: #fff;
            transition: var(--transition);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .glass:hover {
            transform: translateY(-8px);
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }

        /* ================================ TYPOGRAPHY ======================================= */
        .glass h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 800;
            margin-bottom: 1rem;
            font-family: var(--font-display2),serif;
            line-height: 1.2;
        }

        .glass h3 {
            font-size: 1.75rem;
            margin-bottom: 1.25rem;
            font-weight: 700;
            position: relative;
            padding-bottom: 0.75rem;
        }

        .glass h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 60px;
            height: 3px;
            background: var(--clr-accent-1);
            border-radius: 3px;
        }

        .lead {
            opacity: 0.95;
            margin-bottom: 1.5rem;
            line-height: 1.6;
            font-size: 1.25rem;
            font-weight: 300;
        }

        /* ================================== FORM ============================================== */
        .contact-card form {
            display: flex;
            flex-direction: column;
            gap: 1.25rem;
        }

        .contact-card input,
        .contact-card select,
        .contact-card textarea {
            padding: 1rem 1.25rem;
            border: none;
            border-radius: 0.75rem;
            background: rgba(255, 255, 255, 0.95);
            color: #111;
            font-family: var(--font-body),serif;
            font-size: 1rem;
            transition: var(--transition);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .contact-card input:focus,
        .contact-card select:focus,
        .contact-card textarea:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(30, 77, 114, 0.3);
            background: white;
        }

        .contact-card textarea {
            min-height: 120px;
            resize: vertical;
        }

        .btn-hero {
            align-self: flex-start;
            background: linear-gradient(135deg, var(--clr-accent-1), #ff8c5a);
            color: white;
            padding: 1rem 2rem;
            border: none;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
        }

        .btn-hero:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.4);
        }

        /* ================================= RESPONSIVE ========================================= */
        @media (max-width: 992px) {
            .hero-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
                padding: 6rem 1.5rem 2rem;
            }

            .glass {
                padding: 2rem;
            }
        }

        @media (max-width: 768px) {
            .navbar-nav {
                display: none;
            }

            .navbar-toggler {
                display: block;
            }

            .navbar-collapse {
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: var(--clr-nav-bg-light);
                backdrop-filter: blur(12px);
                padding: 1.5rem;
                display: none;
                flex-direction: column;
                gap: 1rem;
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            }

            body[data-theme="dark"] .navbar-collapse {
                background: var(--clr-nav-bg-dark);
            }

            .navbar-collapse.show {
                display: flex;
            }

            .navbar-nav {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }

            .glass h1 {
                font-size: 2.2rem;
            }
        }

        @media (max-width: 576px) {
            .glass {
                padding: 1.5rem;
            }

            .glass h1 {
                font-size: 1.8rem;
            }

            .glass h3 {
                font-size: 1.5rem;
            }

            .btn-hero, .btn-mad {
                padding: 0.8rem 1.5rem;
                font-size: 1rem;
            }
        }

        /* --- HERO SECTION --- */
        .hero-section {
            background: linear-gradient(135deg, var(--clr-primary) 0%, var(--clr-secondary) 100%);
            color: white;
            min-height: 100vh;
            display: flex;
            align-items: center;
            position: relative;
            overflow: hidden;
            padding: 2rem;
            padding-top: calc(2rem + var(--navbar-height));
        }

        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
        }

        .hero-content h1 {
            font-size: clamp(2rem, 5vw, 3.5rem);
            margin-bottom: 1.5rem;
            color: white;
        }

        .hero-content p.lead {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            opacity: 0.95;
        }

        .hero-btns {
            display: flex;
            justify-content: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .btn-hero:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
            background: var(--clr-accent);
            color: white;
        }

        .btn-hero-outline {
            background: transparent;
            color: white;
            border: 2px solid white;
            padding: 0.8rem 2rem;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
        }

        .btn-hero-outline:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-3px);
        }


        /* ------------------------------------------- SERVICES SECTION ---------------------------- */
        #services {
            padding: var(--section-padding) 1.5rem;
            background-color: var(--clr-card-bg-light);
        }

        body[data-theme="dark"] #services {
            background-color: var(--clr-card-bg-dark);
        }

        .grid-3 {
            display: grid;
            gap: 2rem;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        }

        .service-card {
            background: var(--clr-bg-light);
            border-radius: var(--card-radius);
            padding: 2rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: all var(--transition-speed) ease;
            height: 100%;
            border: 1px solid var(--clr-border-light);
            display: flex; /* Use flexbox for internal layout */
            flex-direction: column; /* Stack content vertically */
            justify-content: space-between; /* Push button to bottom */
            text-align: center; /* Center content within card */
        }

        body[data-theme="dark"] .service-card {
            background: var(--clr-card-bg-dark);
            border: 1px solid var(--clr-border-dark);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        body[data-theme="dark"] .service-card:hover {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .service-card .service-icon {
            font-size: 3rem;
            color: var(--clr-primary);
            margin-bottom: 1rem;
            display: block; /* Ensure icon is on its own line */
        }

        body[data-theme="dark"] .service-card .service-icon {
            color: var(--clr-accent);
        }

        .service-card h3 {
            color: var(--clr-primary);
            margin-bottom: 1rem;
            display: block; /* Ensure h3 is on its own line */
            font-size: 1.75rem;
        }

        body[data-theme="dark"] .service-card h3 {
            color: var(--clr-accent);
        }

        .service-card p {
            margin-bottom: 1.5rem;
            flex-grow: 1; /* Allow description to take available space */
        }

        .list-styled {
            padding-left: 0;
            list-style: none;
            margin-bottom: 1.5rem; /* Add margin for button */
            text-align: left; /* Align list items to left */
        }

        .list-styled li {
            margin-bottom: 0.75rem;
            display: flex;
            align-items: flex-start;
        }

        .list-styled li i {
            color: var(--clr-accent);
            margin-right: 0.75rem;
            margin-top: 0.3rem;
        }

        .service-action-buttons {
            display: flex;
            gap: 0.75rem;
            margin-top: auto; /* Push to bottom */
            justify-content: center; /* Center buttons */
            flex-wrap: wrap; /* Allow buttons to wrap on smaller screens */
        }

        .service-action-buttons button {
            background: var(--clr-secondary);
            color: white;
            border: none;
            padding: 0.7rem 1.2rem;
            border-radius: 50px;
            font-weight: 600;
            cursor: pointer;
            transition: all var(--transition-speed) ease;
            white-space: nowrap; /* Prevent text wrapping inside button */
        }

        body[data-theme="dark"] .service-action-buttons button {
            background: var(--clr-primary);
        }

        .service-action-buttons button:hover {
            background: var(--clr-primary);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(30, 77, 114, 0.2);
        }

        body[data-theme="dark"] .service-action-buttons button:hover {
            background: var(--clr-accent-hover);
            box-shadow: 0 5px 15px rgba(135, 206, 235, 0.2);
        }

        .llm-service-detail {
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--clr-border-light);
            font-size: 0.95rem;
            color: var(--clr-text-light);
            display: none; /* Hidden by default */
            text-align: left; /* Align generated text to left */
        }

        body[data-theme="dark"] .llm-service-detail {
            border-top: 1px solid var(--clr-border-dark);
            color: var(--clr-text-dark);
        }

        .llm-service-detail p {
            margin-bottom: 0.5rem;
        }


        /* --- PORTFOLIO SECTION --- */
        #portfolio {
            padding: var(--section-padding) 1.5rem;
        }

        .portfolio-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 2rem;
        }

        .gallery-item {
            position: relative;
            overflow: hidden;
            border-radius: var(--card-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        body[data-theme="dark"] .gallery-item {
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .gallery-item img {
            width: 100%;
            height: 250px;
            object-fit: cover;
            transition: transform var(--transition-speed) ease;
        }

        .gallery-item:hover img {
            transform: scale(1.05);
        }

        .gallery-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(30, 77, 114, 0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity var(--transition-speed) ease;
            padding: 1rem;
            text-align: center;
        }

        body[data-theme="dark"] .gallery-overlay {
            background: rgba(135, 206, 235, 0.85);
        }

        .gallery-item:hover .gallery-overlay {
            opacity: 1;
        }

        .gallery-overlay h5 {
            color: white;
            margin-bottom: 0.5rem;
        }

        .gallery-overlay p {
            color: rgba(255, 255, 255, 0.9);
            margin: 0;
            font-size: 0.9rem;
        }


        /* --- CALCULATOR SECTION --- */
        #calculatorSection {
            padding: var(--section-padding) 1.5rem;
            background-color: var(--clr-card-bg-light);
            position: relative;
            overflow: hidden;
        }

        body[data-theme="dark"] #calculatorSection {
            background-color: var(--clr-card-bg-dark);
        }

        /* Half background effect */
        #calculatorSection::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 50%; /* Half background */
            background: linear-gradient(135deg, var(--clr-primary), var(--clr-secondary));
            z-index: 0;
        }

        body[data-theme="dark"] #calculatorSection::before {
             background: linear-gradient(135deg, var(--clr-accent), var(--clr-secondary));
        }

        .calculator-container {
            position: relative;
            z-index: 1;
            max-width: 700px;
            margin: 0 auto;
            background: var(--clr-bg-light);
            border-radius: var(--card-radius);
            padding: 2.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--clr-border-light);
        }

        body[data-theme="dark"] .calculator-container {
            background: var(--clr-card-bg-dark);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--clr-border-dark);
        }

        #calculator {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        #calculator label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--clr-text-light);
        }

        body[data-theme="dark"] #calculator label {
            color: var(--clr-text-dark);
        }

        #calculator select,
        #calculator input {
            width: 100%;
            padding: 0.8rem 1rem;
            border: 1px solid var(--clr-border-light);
            border-radius: 8px;
            background-color: var(--clr-bg-light);
            color: var(--clr-text-light);
            transition: border-color var(--transition-speed) ease;
        }

        body[data-theme="dark"] #calculator select,
        body[data-theme="dark"] #calculator input {
            border: 1px solid var(--clr-border-dark);
            background-color: var(--clr-card-bg-dark);
            color: var(--clr-text-dark);
        }

        #calculator select:focus,
        #calculator input:focus {
            outline: none;
            border-color: var(--clr-accent);
            box-shadow: 0 0 0 3px rgba(135, 206, 235, 0.25);
        }

        body[data-theme="dark"] #calculator select:focus,
        body[data-theme="dark"] #calculator input:focus {
            box-shadow: 0 0 0 3px rgba(30, 77, 114, 0.25);
        }

        #quoteResult {
            font-weight: 700;
            color: var(--clr-primary);
            font-size: 1.5rem;
            text-align: center;
            padding: 1rem;
            background-color: rgba(135, 206, 235, 0.1);
            border-radius: 8px;
        }

        body[data-theme="dark"] #quoteResult {
            color: var(--clr-accent);
            background-color: rgba(30, 77, 114, 0.2);
        }


        /* --- ABOUT SECTION --- */
        #about {
            padding: var(--section-padding) 1.5rem;
        }

        .about-content {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            align-items: center;
        }

        .about-text {
            flex: 1;
            min-width: 300px;
        }

        .about-stats {
            flex: 1;
            min-width: 300px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
        }

        .stats-card {
            background: var(--clr-card-bg-light);
            border-radius: var(--card-radius);
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--clr-border-light);
        }

        body[data-theme="dark"] .stats-card {
            background: var(--clr-card-bg-dark);
            border: 1px solid var(--clr-border-dark);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .stats-counter {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--clr-primary);
            margin-bottom: 0.5rem;
        }

        body[data-theme="dark"] .stats-counter {
            color: var(--clr-accent);
        }

        .stats-card p {
            margin: 0;
            font-size: 0.9rem;
        }


        /* --- CONTACT SECTION --- */
        #contact {
            padding: var(--section-padding) 1.5rem;
            background-color: var(--clr-card-bg-light);
        }

        body[data-theme="dark"] #contact {
            background-color: var(--clr-card-bg-dark);
        }

        .contact-form-container { /* New container for better layout */
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            max-width: 1000px; /* Adjust as needed */
            margin: 0 auto;
            justify-content: center;
            align-items: flex-start;
        }

        .contact-form {
            flex: 2; /* Form takes more space */
            min-width: 350px; /* Minimum width for form */
            background: var(--clr-bg-light);
            border-radius: var(--card-radius);
            padding: 2.5rem;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--clr-border-light);
        }

        body[data-theme="dark"] .contact-form {
            background: var(--clr-card-bg-dark);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--clr-border-dark);
        }

        .contact-info-details { /* New container for contact info */
            flex: 1; /* Info takes less space */
            min-width: 250px; /* Minimum width for info */
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            padding: 1.5rem;
            background: var(--clr-bg-light);
            border-radius: var(--card-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--clr-border-light);
        }

        body[data-theme="dark"] .contact-info-details {
            background: var(--clr-card-bg-dark);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            border: 1px solid var(--clr-border-dark);
        }

        .contact-info-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            text-align: left;
        }

        .contact-info-item .icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--clr-primary), var(--clr-secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
            flex-shrink: 0;
        }

        body[data-theme="dark"] .contact-info-item .icon {
            background: linear-gradient(135deg, var(--clr-accent), var(--clr-secondary));
        }

        .contact-info-item .details h5 {
            margin-bottom: 0.25rem;
            color: var(--clr-primary);
        }

        body[data-theme="dark"] .contact-info-item .details h5 {
            color: var(--clr-accent);
        }

        .contact-info-item .details p {
            margin: 0;
            font-size: 0.95rem;
            color: var(--clr-text-light);
        }

        body[data-theme="dark"] .contact-info-item .details p {
            color: var(--clr-text-dark);
        }

        .form-label {
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--clr-text-light);
        }

        body[data-theme="dark"] .form-label {
            color: var(--clr-text-dark);
        }

        .form-control {
            padding: 0.8rem 1rem;
            border: 1px solid var(--clr-border-light);
            border-radius: 8px;
            background-color: var(--clr-bg-light);
            color: var(--clr-text-light);
            transition: border-color var(--transition-speed) ease;
        }

        body[data-theme="dark"] .form-control {
            border: 1px solid var(--clr-border-dark);
            background-color: var(--clr-card-bg-dark);
            color: var(--clr-text-dark);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--clr-accent);
            box-shadow: 0 0 0 3px rgba(135, 206, 235, 0.25);
        }

        body[data-theme="dark"] .form-control:focus {
            box-shadow: 0 0 0 3px rgba(30, 77, 114, 0.25);
        }

        /* Styles for LLM generated content */
        .llm-response-container {
            margin-top: 2rem;
            padding: 1.5rem;
            background: var(--clr-card-bg-light);
            border-radius: var(--card-radius);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--clr-border-light);
            display: none; /* Hidden by default */
            color: var(--clr-text-light);
        }

        body[data-theme="dark"] .llm-response-container {
            background: var(--clr-card-bg-dark);
            border: 1px solid var(--clr-border-dark);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            color: var(--clr-text-dark);
        }

        .llm-response-container h5 {
            color: var(--clr-primary);
            margin-bottom: 1rem;
        }

        body[data-theme="dark"] .llm-response-container h5 {
            color: var(--clr-accent);
        }

        .llm-response-container ul {
            list-style: disc;
            padding-left: 1.5rem;
        }

        .llm-response-container ul li {
            margin-bottom: 0.5rem;
        }

        .loading-spinner {
            display: none;
            text-align: center;
            margin-top: 1rem;
            color: var(--clr-primary);
        }

        body[data-theme="dark"] .loading-spinner {
            color: var(--clr-accent);
        }

        .loading-spinner::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid currentColor;
            border-top-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            vertical-align: middle;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }


        /* --- FOOTER --- */
        .footer {
            background: var(--clr-primary);
            color: white;
            padding: 4rem 0 2rem;
            text-align: center;
        }

        body[data-theme="dark"] .footer {
            background: #0a0a0a; /* Slightly darker than dark bg for contrast */
        }

        .footer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            text-align: left;
            margin-bottom: 3rem;
        }

        .footer-col h5 {
            color: white;
            margin-bottom: 1.5rem;
            position: relative;
            padding-bottom: 0.5rem;
        }

        .footer-col h5::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 40px;
            height: 3px;
            background: var(--clr-accent);
            border-radius: 2px;
        }

        .footer-col ul {
            list-style: none;
            padding: 0;
        }

        .footer-col ul li {
            margin-bottom: 0.75rem;
        }

        .footer-col a {
            color: rgba(255, 255, 255, 0.8);
            transition: color var(--transition-speed) ease;
            text-decoration: none;
        }

        .footer-col a:hover {
            color: white;
        }

        .social-links {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            transition: all var(--transition-speed) ease;
        }

        .social-links a:hover {
            background: var(--clr-accent);
            transform: translateY(-3px);
        }

        .footer-bottom {
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
        }

        .footer-bottom p {
            margin: 0;
        }


        /* --- BUTTONS --- */
        .btn-mad {
            background: linear-gradient(135deg, var(--clr-primary), var(--clr-secondary));
            border: none;
            padding: 0.8rem 1.75rem;
            border-radius: 50px;
            color: white;
            font-weight: 600;
            transition: all var(--transition-speed) ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        body[data-theme="dark"] .btn-mad {
            background: linear-gradient(135deg, var(--clr-accent), var(--clr-secondary));
            color: var(--clr-text-dark); /* Ensure text is readable on light gradient */
        }

        .btn-mad:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(30, 77, 114, 0.3);
        }

        body[data-theme="dark"] .btn-mad:hover {
            box-shadow: 0 10px 25px rgba(135, 206, 235, 0.3);
        }

        .btn-mad::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.5s;
        }

        .btn-mad:hover::before {
            left: 100%;
        }


        /* --- ANIMATIONS --- */
        @media (prefers-reduced-motion: no-preference) {
            .fade {
                opacity: 0;
                transform: translateY(20px);
                transition: all .6s;
            }
            .fade.show {
                opacity: 1;
                transform: none;
            }
        }

        /* --- RESPONSIVE DESIGN --- */
        @media (max-width: 992px) {
            .navbar {
                padding: 0.5rem 1rem;
            }
            .navbar-brand {
                order: 1;
            }
            .navbar-nav {
                display: none;
            }
            .navbar-toggler {
                display: flex;
                order: 3;
            }
            .navbar-controls {
                order: 2;
            }
            .navbar-collapse {
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                padding: 1rem;
                order: 4;
                width: 100%;
            }
            .navbar-collapse.show {
                display: block;
            }
            .navbar-collapse .navbar-nav {
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
            }
            .hero-content h1 {
                font-size: 2.5rem;
            }
            .hero-content p.lead {
                font-size: 1.1rem;
            }
            .about-content {
                flex-direction: column;
            }
            .contact-form-container { /* Adjust for smaller screens */
                flex-direction: column;
                align-items: center;
            }
            .contact-form, .contact-info-details {
                width: 100%;
                min-width: unset; /* Remove min-width for full flexibility */
            }
        }

        @media (max-width: 576px) {

            .hero-content h1 {
                font-size: 2rem;
            }
            .calculator-container {
                padding: 1.5rem;
            }
            .contact-form {
                padding: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <!-------------------------------------------- Navigation ------------------------------------------>
    <nav class="navbar navbar-expand-lg">
        <!-- Centered Brand Logo -->
        <a class="navbar-brand" href="#home">
            <div class="brand-content">
                <div class="brand-icon">
                    <i class="fas fa-home text-white"></i>
                </div>
                <div class="brand-text">
                    <h4>Malik Art Decor</h4>
                    <small>P.O.P & Gypsum Works</small>
                </div>
            </div>
        </a>

        <!-- Right Controls -->
        <div class="navbar-controls">
            <!-- Theme Toggle -->
            <button class="theme-toggle" aria-label="Toggle dark mode" onclick="toggleTheme()">
                <svg id="themeIcon" width="18" height="18" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.106a.75.75 0 011.06-1.06l1.591 1.591a.75.75 0 11-1.06 1.06l-1.591-1.591zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75z"/>
                </svg>
            </button>

            <!-- Mobile Menu Toggle -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>

        <!-- Collapsible Navigation Menu -->
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto mt-2 mt-lg-0">
                <li class="nav-item"><a class="nav-link" href="#home">Home</a></li>
                <li class="nav-item"><a class="nav-link" href="#services">Services</a></li>
                <li class="nav-item"><a class="nav-link" href="#portfolio">Portfolio</a></li>
                <li class="nav-item"><a class="nav-link" href="#about">About</a></li>
                <li class="nav-item"><a class="nav-link" href="#contact">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!--------------------------------------------- Hero Section ----------------------------------------->
    <section class="hero-grid">

        <div class="hero-bg"></div>

        <!-- Hero Card -->
        <article class="hero-card glass fade-in">
            <h1>Transform Spaces with <span id="typed">Expert P.O.P</span></h1>
            <p class="lead">
                Jaipur's trusted P.O.P & Gypsum specialists with 500+ projects delivered.
                We create stunning interiors that elevate your space and reflect your vision.
            </p>
            <a href="#calculatorSection" class="btn-hero">Get Instant Quote</a>
        </article>

        <!-- Quick Enquiry Form -->
        <aside  class="contact-card glass fade-in">
            <h3>Quick Enquiry</h3>
            <form id="homeContactForm">
                <input type="text" name="name" placeholder="Your Name" required aria-label="Your Name">
                <input type="email" name="email" placeholder="Email Address" required aria-label="Email Address">
                <input type="tel" name="phone" placeholder="Phone Number" required aria-label="Phone Number">
                <select name="service" required aria-label="Select Service">
                    <option value="">Select Service</option>
                    <option value="P.O.P Works">P.O.P Works</option>
                    <option value="Gypsum Works">Gypsum Works</option>
                    <option value="Turn-Key Construction">Turn-Key Construction</option>
                    <option value="Interior Design">Interior Design</option>
                    <option value="Renovation">Renovation</option>
                </select>
                <textarea name="message" placeholder="Project Details" rows="4" required aria-label="Project Details"></textarea>
                <button type="submit" class="btn-hero">Send Message</button>
            </form>
        </aside>

    </section>

    <!------------------------------------------------ Hero Section - Secondary (can be removed if not needed) ------------------------------------------>
    <!-- This section seems redundant with the hero-grid, consider removing or integrating its content -->
    <section id="home" class="hero-section" style="display: none;">
        <div class="container">
            <div class="hero-content">
                <h1 class="display-3 fw-bold mb-4">Transform Your Space with Expert Craftsmanship</h1>
                <p class="lead mb-4">Malik Art Decor specializes in premium P.O.P. (Plaster of Paris) and Gypsum works, bringing elegance and sophistication to residential and commercial spaces.</p>
                <div class="hero-btns">
                    <button class="btn-hero" onclick="scrollToSection('services')">
                        <i class="fas fa-tools me-2"></i>Our Services
                    </button>
                    <button class="btn-hero-outline" onclick="scrollToSection('portfolio')">
                        <i class="fas fa-images me-2"></i>View Portfolio
                    </button>
                </div>
            </div>
        </div>
    </section>

    <!---------------------------------------------- Services Section ---------------------------------------->
    <section id="services">
            <div class="container">
                <h2 class="section-title">Our Core Services</h2>
                <div class="grid-3">
                    <article class="service-card fade">
                        <h3>üñºÔ∏è P.O.P False Ceilings</h3>
                        <p>Customized cornices, crown moldings & designer ceilings with 10-year warranty.</p>
                        <ul class="list-styled text-start mt-3">
                            <li><i class="fas fa-check text-success me-2" aria-hidden="true"></i>False Ceiling Designs</li>
                            <li><i class="fas fa-check text-success me-2" aria-hidden="true"></i>Wall Moldings</li>
                            <li><i class="fas fa-check text-success me-2" aria-hidden="true"></i>Decorative Cornices</li>
                            <li><i class="fas fa-check text-success me-2" aria-hidden="true"></i>Custom Designs</li>
                        </ul>
                        <div class="service-action-buttons">
                            <button class="service-action-btn" data-action="elaborate" data-service-name="P.O.P False Ceilings" data-service-desc="Customized cornices, crown moldings & designer ceilings with 10-year warranty." data-target-id="popElaboration" data-spinner-id="popSpinner" aria-controls="popElaboration">Elaborate ‚ú®</button>
                            <button class="service-action-btn" data-action="summarize" data-service-name="P.O.P False Ceilings" data-service-desc="Customized cornices, crown moldings & designer ceilings with 10-year warranty." data-target-id="popElaboration" data-spinner-id="popSpinner" aria-controls="popElaboration">Summarize üìù</button>
                        </div>
                        <div id="popElaboration" class="llm-service-detail" aria-live="polite" aria-atomic="true"></div>
                        <div id="popSpinner" class="loading-spinner" role="status" aria-label="Generating details...">Generating details...</div>
                    </article>
                    <article class="service-card fade">
                        <h3>üè¢ Gypsum Partitioning</h3>
                        <p>Sound-proof, fire-rated gypsum boards for offices & homes in 48 hrs.</p>
                        <ul class="list-unstyled text-start mt-3">
                            <li><i class="fas fa-check text-success me-2" aria-hidden="true"></i>Gypsum Board Partitions</li>
                            <li><i class="fas fa-check text-success me-2" aria-hidden="true"></i>Suspended Ceilings</li>
                            <li><i class="fas fa-check text-success me-2" aria-hidden="true"></i>Soundproofing Solutions</li>
                            <li><i class="fas fa-check text-success me-2" aria-hidden="true"></i>Fire-Resistant Installations</li>
                        </ul>
                        <div class="service-action-buttons">
                            <button class="service-action-btn" data-action="elaborate" data-service-name="Gypsum Partitioning" data-service-desc="Sound-proof, fire-rated gypsum boards for offices & homes in 48 hrs." data-target-id="gypsumElaboration" data-spinner-id="gypsumSpinner" aria-controls="gypsumElaboration">Elaborate ‚ú®</button>
                            <button class="service-action-btn" data-action="summarize" data-service-name="Gypsum Partitioning" data-service-desc="Sound-proof, fire-rated gypsum boards for offices & homes in 48 hrs." data-target-id="gypsumElaboration" data-spinner-id="gypsumSpinner" aria-controls="gypsumElaboration">Summarize üìù</button>
                        </div>
                        <div id="gypsumElaboration" class="llm-service-detail" aria-live="polite" aria-atomic="true"></div>
                        <div id="gypsumSpinner" class="loading-spinner" role="status" aria-label="Generating details...">Generating details...</div>
                    </article>
                    <article class="service-card fade">
                        <h3>üèóÔ∏è Turn-Key Construction</h3>
                        <p>From blueprint to hand-over ‚Äì design, civil, MEP & interior under one roof.</p>
                        <ul class="list-unstyled text-start mt-3">
                            <li><i class="fas fa-check text-success me-2" aria-hidden="true"></i>Project Planning</li>
                            <li><i class="fas fa-check text-success me-2" aria-hidden="true"></i>Quality Construction</li>
                            <li><i class="fas fa-check text-success me-2" aria-hidden="true"></i>Timely Delivery</li>
                            <li><i class="fas fa-check text-success me-2" aria-hidden="true"></i>Post-Construction Support</li>
                        </ul>
                        <div class="service-action-buttons">
                            <button class="service-action-btn" data-action="elaborate" data-service-name="Turn-Key Construction" data-service-desc="From blueprint to hand-over ‚Äì design, civil, MEP & interior under one roof." data-target-id="constructionElaboration" data-spinner-id="constructionSpinner" aria-controls="constructionElaboration">Elaborate ‚ú®</button>
                            <button class="service-action-btn" data-action="summarize" data-service-name="Turn-Key Construction" data-service-desc="From blueprint to hand-over ‚Äì design, civil, MEP & interior under one roof." data-target-id="constructionElaboration" data-spinner-id="constructionSpinner" aria-controls="constructionElaboration">Summarize üìù</button>
                        </div>
                        <div id="constructionElaboration" class="llm-service-detail" aria-live="polite" aria-atomic="true"></div>
                        <div id="constructionSpinner" class="loading-spinner" role="status" aria-label="Generating details...">Generating details...</div>
                    </article>
                </div>
            </div>
        </section>


    <!---------------------------------------------- Portfolio Section -------------------------------------->
    <section id="portfolio">
        <div class="container">
            <h2 class="section-title">Our Recent Projects</h2>
            <div class="portfolio-grid">
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=500" alt="Modern P.O.P Ceiling Design" onerror="this.onerror=null;this.src='https://placehold.co/500x250/cccccc/333333?text=Image+Not+Found';">
                    <div class="gallery-overlay">
                        <div>
                            <h5>Modern P.O.P Ceiling</h5>
                            <p>Residential Project</p>
                        </div>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=500" alt="Gypsum Wall Design" onerror="this.onerror=null;this.src='https://placehold.co/500x250/cccccc/333333?text=Image+Not+Found';">
                    <div class="gallery-overlay">
                        <div>
                            <h5>Gypsum Wall Installation</h5>
                            <p>Commercial Office</p>
                        </div>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1618221195710-dd6b41faaea6?w=500" alt="Decorative Molding" onerror="this.onerror=null;this.src='https://placehold.co/500x250/cccccc/333333?text=Image+Not+Found';">
                    <div class="gallery-overlay">
                        <div>
                            <h5>Decorative Moldings</h5>
                            <p>Luxury Home</p>
                        </div>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1631679706909-1844bbd07221?w=500" alt="False Ceiling" onerror="this.onerror=null;this.src='https://placehold.co/500x250/cccccc/333333?text=Image+Not+Found';">
                    <div class="gallery-overlay">
                        <div>
                            <h5>False Ceiling Design</h5>
                            <p>Restaurant Project</p>
                        </div>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1600210492486-724fe5c67fb0?w=500" alt="Gypsum Partition" onerror="this.onerror=null;this.src='https://placehold.co/500x250/cccccc/333333?text=Image+Not+Found';">
                    <div class="gallery-overlay">
                        <div>
                            <h5>Gypsum Partitions</h5>
                            <p>Office Complex</p>
                        </div>
                    </div>
                </div>
                <div class="gallery-item">
                    <img src="https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=500" alt="Custom P.O.P Work" onerror="this.onerror=null;this.src='https://placehold.co/500x250/cccccc/333333?text=Image+Not+Found';">
                    <div class="gallery-overlay">
                        <div>
                            <h5>Custom P.O.P Design</h5>
                            <p>Residential Villa</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!--------------------------------------------- Calculator Section ------------------------------------->
    <section id="calculatorSection">
        <div class="container">
            <h2 class="section-title text-white">Instant Project Estimator</h2>
            <div class="calculator-container">
                <form id="calculator">
                    <div>
                        <label for="serviceType">Service Type</label>
                        <select id="serviceType">
                            <option value="pop">P.O.P False Ceiling</option>
                            <option value="gypsum">Gypsum Partition</option>
                            <option value="full">Turn-Key Construction</option>
                        </select>
                    </div>
                    <div>
                        <label for="area">Area (sq ft)</label>
                        <input type="number" id="area" min="50" value="500">
                    </div>
                    <div>
                        <label for="finish">Finishing Level</label>
                        <select id="finish">
                            <option value="basic">Basic</option>
                            <option value="premium">Premium</option>
                            <option value="luxury">Luxury</option>
                        </select>
                    </div>
                    <div>
                        <p style="margin-top:1rem; text-align: center;">Estimated Cost: <span id="quoteResult">‚Çπ 0</span></p>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!--------------------------------------------- About Section ------------------------------------------>
    <section id="about">
        <div class="container">
            <h2 class="section-title">About Malik Art Decor</h2>
            <div class="about-content">
                <div class="about-text">
                    <p class="lead">With over a decade of experience in the industry, Malik Art Decor has established itself as a leading provider of P.O.P. and Gypsum works in the region.</p>
                    <p>Our team of skilled craftsmen and designers work together to transform ordinary spaces into extraordinary environments. We pride ourselves on attention to detail, quality materials, and timely project completion.</p>
                    <div style="margin-top: 2rem;">
                        <h5><i class="fas fa-medal text-primary me-2"></i> Quality Assurance</h5>
                        <p>We use only the finest materials and proven techniques to ensure lasting quality in every project.</p>
                        <h5 style="margin-top: 1.5rem;"><i class="fas fa-clock text-primary me-2"></i> Timely Delivery</h5>
                        <p>Our efficient project management ensures all work is completed within agreed timelines.</p>
                    </div>
                </div>
                <div class="about-stats">
                    <div class="stats-card">
                        <div class="stats-counter" data-target="500">100+</div>
                        <p>Projects Completed</p>
                    </div>
                    <div class="stats-card">
                        <div class="stats-counter" data-target="10">36</div>
                        <p>Years Experience</p>
                    </div>
                    <div class="stats-card">
                        <div class="stats-counter" data-target="100">36000+</div>
                        <p>Happy Clients</p>
                    </div>
                    <div class="stats-card">
                        <div class="stats-counter" data-target="24">10+</div>
                        <p>Expert Team</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!---------------------------------------------- Contact Section ------------------------------------->
    <section id="contact">
        <div class="container">
            <h2 class="section-title">Get In Touch</h2>
            <div class="contact-form-container">
                <div class="contact-form">
                    <form id="contactForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="contactName" class="form-label">Full Name</label>
                                <input type="text" class="form-control" id="contactName" name="name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="contactPhone" class="form-label">Phone Number</label>
                                <input type="tel" class="form-control" id="contactPhone" name="phone" required>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="contactEmail" class="form-label">Email Address</label>
                            <input type="email" class="form-control" id="contactEmail" name="email" required>
                        </div>
                        <div class="mb-3">
                            <label for="contactService" class="form-label">Service Required</label>
                            <select class="form-control" id="contactService" name="service" required>
                                <option value="">Select Service</option>
                                <option value="P.O.P. Works">P.O.P. Works</option>
                                <option value="Gypsum Works">Gypsum Works</option>
                                <option value="Construction Contract">Construction Contract</option>
                                <option value="Consultation">Consultation</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="contactMessage" class="form-label">Project Details</label>
                            <textarea class="form-control" id="contactMessage" name="message" rows="5" placeholder="Tell us about your project requirements..."></textarea>
                        </div>
                        <div class="text-center d-grid gap-2">
                            <button type="submit" class="btn btn-mad btn-lg">
                                <i class="fas fa-paper-plane me-2"></i>Send Message
                            </button>
                            <button type="button" id="getIdeasBtn" class="btn btn-mad btn-lg">
                                <i class="fas fa-lightbulb me-2"></i>Get Project Ideas ‚ú®
                            </button>
                        </div>
                    </form>
                    <div id="llmResponse" class="llm-response-container">
                        <h5>‚ú® Project Enhancement Ideas:</h5>
                        <div id="llmResponseContent"></div>
                        <div id="llmLoadingSpinner" class="loading-spinner">Generating ideas...</div>
                    </div>
                </div>

                <div class="contact-info-details">
                    <div class="contact-info-item">
                        <div class="icon"><i class="fas fa-map-marker-alt"></i></div>
                        <div class="details">
                            <h5>Visit Us</h5>
                            <p>Plot No. 43,44 <br>Bhumika Nagar Colony, Bagrana<br>Jaipur, Rajasthan</p>
                        </div>
                    </div>
                    <div class="contact-info-item">
                        <div class="icon"><i class="fas fa-phone"></i></div>
                        <div class="details">
                            <h5>Call Us</h5>
                            <p>+91 97696 26310<br>+91 99834 22575</p>
                        </div>
                    </div>
                    <div class="contact-info-item">
                        <div class="icon"><i class="fas fa-envelope"></i></div>
                        <div class="details">
                            <h5>Email Us</h5>
                            <p>malikartdecor@gmail.com<br>projects@malikartdecor.com</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!---------------------------------------------- Footer --------------------------------------------->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div class="footer-col">
                    <div class="d-flex align-items-center mb-3">
                        <div style="background: linear-gradient(135deg, var(--clr-accent), #ffffff); width: 50px; height: 50px; border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-right: 15px;">
                            <i class="fas fa-home" style="color: var(--clr-primary); font-size: 1.5rem;"></i>
                        </div>
                        <div>
                            <h4 style="color: white; margin: 0;">Malik Art Decor</h4>
                            <small style="color: var(--clr-accent);">P.O.P. & GYPSUM SPECIALISTS</small>
                        </div>
                    </div>
                    <p>Transforming spaces with expert craftsmanship and innovative design solutions. Your trusted partner for all P.O.P. and Gypsum works.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-col">
                    <h5>Services</h5>
                    <ul>
                        <li><a href="#">P.O.P. Works</a></li>
                        <li><a href="#">Gypsum Works</a></li>
                        <li><a href="#">Construction</a></li>
                        <li><a href="#">Consultation</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h5>Quick Links</h5>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#services">Services</a></li>
                        <li><a href="#portfolio">Portfolio</a></li>
                        <li><a href="#about">About</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h5>Connect With Us</h5>
                    <p><i class="fas fa-envelope me-2"></i>malikartdecor@gmail.com</p>
                    <p><i class="fas fa-phone me-2"></i>+91 97696 26310</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Malik Art Decor. All Rights Reserved.</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // --- ENHANCED JAVASCRIPT ---

        // Initialize theme from localStorage
        const savedTheme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
        document.documentElement.setAttribute('data-theme', savedTheme);


        // Wait for DOM to be fully loaded
        document.addEventListener('DOMContentLoaded', function () {
            // MOBILE MENU TOGGLE FUNCTIONALITY
            function initializeMobileMenu() {
                const navbarToggler = document.querySelector('.navbar-toggler');
                const navbarCollapse = document.querySelector('.navbar-collapse');
                if (navbarToggler && navbarCollapse) {
                    navbarToggler.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        navbarCollapse.classList.toggle('show');
                        const isExpanded = navbarCollapse.classList.contains('show');
                        navbarToggler.setAttribute('aria-expanded', isExpanded);
                        if (isExpanded) {
                            document.body.style.overflow = 'hidden';
                        } else {
                            document.body.style.overflow = '';
                        }
                    });
                    document.addEventListener('click', function (e) {
                        if (!navbarToggler.contains(e.target) && !navbarCollapse.contains(e.target)) {
                            if (navbarCollapse.classList.contains('show')) {
                                navbarCollapse.classList.remove('show');
                                navbarToggler.setAttribute('aria-expanded', 'false');
                                document.body.style.overflow = '';
                            }
                        }
                    });
                    window.addEventListener('resize', function () {
                        if (window.innerWidth > 992) {
                            navbarCollapse.classList.remove('show');
                            navbarToggler.setAttribute('aria-expanded', 'false');
                            document.body.style.overflow = '';
                        }
                    });
                }
            }

            // THEME TOGGLE FUNCTIONALITY
            function toggleTheme() {
                const html = document.documentElement;
                const current = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
                html.setAttribute('data-theme', current);
                localStorage.setItem('theme', current);
                updateThemeIcon(current);
            }

            function updateThemeIcon(theme) {
                const themeIcon = document.getElementById('themeIcon');
                if (themeIcon) {
                    if (theme === 'dark') {
                        themeIcon.innerHTML = '<path d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"/>';
                    } else {
                        themeIcon.innerHTML = '<path d="M12 2.25a.75.75 0 01.75.75v2.25a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM7.5 12a4.5 4.5 0 119 0 4.5 4.5 0 01-9 0zM18.894 6.106a.75.75 0 011.06-1.06l1.591 1.591a.75.75 0 11-1.06 1.06l-1.591-1.591zM21.75 12a.75.75 0 01-.75.75h-2.25a.75.75 0 010-1.5H21a.75.75 0 01.75.75z"/>';
                    }
                }
            }

            window.toggleTheme = toggleTheme; // Make toggleTheme globally accessible

            // ---------------------------------------- TYPED.JS INITIALIZATION ----------------------------------------//
            function initializeTypedText() {
                const typedElement = document.getElementById('typed');
                if (typedElement) {
                    const texts = ['Expert P.O.P', 'Gypsum Work', 'Lavish Interiors', 'Jaipur\'s Best'];
                    let currentIndex = 0;
                    let charIndex = 0;
                    let isDeleting = false;
                    let typingSpeed = 150;

                    function type() {
                        const currentText = texts[currentIndex];

                        if (isDeleting) {
                            typedElement.textContent = currentText.substring(0, charIndex - 1);
                            charIndex--;
                            typingSpeed = 100;
                        } else {
                            typedElement.textContent = currentText.substring(0, charIndex + 1);
                            charIndex++;
                            typingSpeed = 150;
                        }

                        if (!isDeleting && charIndex === currentText.length) {
                            isDeleting = true;
                            typingSpeed = 1500; // Pause at end of typing
                        } else if (isDeleting && charIndex === 0) {
                            isDeleting = false;
                            currentIndex = (currentIndex + 1) % texts.length;
                            typingSpeed = 500; // Pause before new word starts
                        }

                        setTimeout(type, typingSpeed);
                    }
                    type();
                }
            }

            // NAVBAR SCROLL EFFECT
            function initializeScrollEffect() {
                window.addEventListener('scroll', function () {
                    const navbar = document.querySelector('.navbar');
                    if (navbar) {
                        if (window.scrollY > 50) {
                            navbar.classList.add('scrolled');
                        } else {
                            navbar.classList.remove('scrolled');
                        }
                    }
                });
            }

            // CALCULATOR LOGIC
            function initializeCalculator() {
                const rates = { pop: 28, gypsum: 70, full: 1500 };
                function updateQuote() {
                    const serviceType = document.getElementById('serviceType');
                    const area = document.getElementById('area');
                    const finish = document.getElementById('finish');
                    const quoteResult = document.getElementById('quoteResult');
                    if (serviceType && area && finish && quoteResult) {
                        const type = serviceType.value;
                        const areaValue = parseInt(area.value) || 0;
                        const finishMultipliers = { basic: 1, premium: 1.2, luxury: 1.5 };
                        const price = Math.round(areaValue * rates[type] * finishMultipliers[finish.value]);
                        quoteResult.textContent = `‚Çπ ${price.toLocaleString()}`;
                    }
                }
                window.updateQuote = updateQuote;
                updateQuote(); // Initial calculation
                ['serviceType', 'area', 'finish'].forEach(id => {
                    const element = document.getElementById(id);
                    if (element) {
                        element.addEventListener('change', updateQuote);
                        element.addEventListener('input', updateQuote);
                    }
                });
            }

            // SMOOTH SCROLL FUNCTIONALITY
            function initializeSmoothScroll() {
                window.scrollToSection = function (sectionId) {
                    const element = document.getElementById(sectionId);
                    if (element) {
                        const offsetTop = element.offsetTop - 80; // Adjust for fixed navbar height
                        window.scrollTo({
                            top: offsetTop,
                            behavior: 'smooth'
                        });
                    }
                };

                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', function (e) {
                        e.preventDefault();
                        const href = this.getAttribute('href');
                        if (href && href.startsWith('#')) {
                            const targetId = href.substring(1);
                            const targetElement = document.getElementById(targetId);
                            if (targetElement) {
                                const offsetTop = targetElement.offsetTop - 80; // Adjust for fixed navbar height
                                window.scrollTo({
                                    top: offsetTop,
                                    behavior: 'smooth'
                                });
                            }
                            const navbarCollapse = document.querySelector('.navbar-collapse');
                            const navbarToggler = document.querySelector('.navbar-toggler');
                            if (navbarCollapse && navbarCollapse.classList.contains('show')) {
                                navbarCollapse.classList.remove('show');
                                if (navbarToggler) {
                                    navbarToggler.setAttribute('aria-expanded', 'false');
                                }
                                document.body.style.overflow = ''; // Re-enable scrolling
                            }
                        }
                    });
                });
            }

            // FADE ON SCROLL ANIMATION
            function initializeFadeOnScroll() {
                if ('IntersectionObserver' in window) {
                    const io = new IntersectionObserver(entries => {
                        entries.forEach(entry => {
                            entry.target.classList.toggle('show', entry.isIntersecting);
                        });
                    }, {
                        threshold: 0.2, // Trigger when 20% of the element is visible
                        rootMargin: '0px 0px -50px 0px' // Start animation slightly before reaching bottom
                    });
                    document.querySelectorAll('.fade').forEach(el => {
                        io.observe(el);
                    });
                } else {
                    // Fallback for browsers that don't support IntersectionObserver
                    document.querySelectorAll('.fade').forEach(el => {
                        el.classList.add('show');
                    });
                }
            }

            // CONTACT FORM HANDLING (for both forms)
            function setupFormSubmission(formId) {
                const form = document.getElementById(formId);
                if (form) {
                    form.addEventListener('submit', async function (e) {
                        e.preventDefault(); // Prevent default form submission

                        // Simple validation
                        const inputs = form.querySelectorAll('input[required], select[required], textarea[required]');
                        let allFieldsFilled = true;
                        inputs.forEach(input => {
                            if (!input.value.trim()) {
                                allFieldsFilled = false;
                            }
                        });

                        if (!allFieldsFilled) {
                            showMessageBox('Please fill in all required fields.', 'error');
                            return;
                        }

                        // Collect form data
                        const formData = new FormData(form);
                        const data = {};
                        formData.forEach((value, key) => {
                            data[key] = value;
                        });

                        try {
                            const response = await fetch('https://formspree.io/f/mblowogr', {
                                method: 'POST',
                                body: formData,
                                headers: {
                                    'Accept': 'application/json'
                                }
                            });

                            if (response.ok) {
                                showMessageBox('Thank you for your message! We will get back to you soon.', 'success');
                                form.reset(); // Clear the form
                                document.getElementById('llmResponse').style.display = 'none'; // Hide LLM response on new submission
                                document.getElementById('llmResponseContent').innerHTML = ''; // Clear LLM content
                            } else {
                                const errorData = await response.json();
                                showMessageBox(`Oops! Something went wrong. ${errorData.error || ''}`, 'error');
                                console.error('Form submission error:', errorData);
                            }
                        } catch (error) {
                            showMessageBox('An error occurred while sending your message. Please try again later.', 'error');
                            console.error('Network error during form submission:', error);
                        }
                    });
                }
            }

            // Custom Message Box (replaces alert())
            function showMessageBox(message, type = 'info') {
                const existingMessageBox = document.getElementById('customMessageBox');
                if (existingMessageBox) {
                    existingMessageBox.remove();
                }

                const messageBox = document.createElement('div');
                messageBox.id = 'customMessageBox';
                messageBox.style.cssText = `
                    position: fixed;
                    top: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background-color: ${type === 'success' ? '#4CAF50' : (type === 'error' ? '#f44336' : '#2196F3')};
                    color: white;
                    padding: 15px 25px;
                    border-radius: 8px;
                    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
                    z-index: 10000;
                    opacity: 0;
                    transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
                    font-family: var(--font-body), sans-serif;
                    max-width: 90%;
                    text-align: center;
                `;
                messageBox.textContent = message;
                document.body.appendChild(messageBox);

                setTimeout(() => {
                    messageBox.style.opacity = '1';
                    messageBox.style.transform = 'translateX(-50%) translateY(0)';
                }, 100);

                setTimeout(() => {
                    messageBox.style.opacity = '0';
                    messageBox.style.transform = 'translateX(-50%) translateY(-20px)';
                    messageBox.addEventListener('transitionend', () => messageBox.remove());
                }, 5000); // Message disappears after 5 seconds
            }

            // STATS COUNTER ANIMATION
            function initializeStatsCounter() {
                const counters = document.querySelectorAll('.stats-counter');
                const observer = new IntersectionObserver(entries => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const counter = entry.target;
                            const target = parseInt(counter.getAttribute('data-target')) || parseInt(counter.textContent);
                            const increment = target / 200; // Adjust for smoother animation
                            let current = 0;
                            const updateCounter = () => {
                                if (current < target) {
                                    current += increment;
                                    counter.textContent = Math.floor(current) + '+'; // Add '+' sign
                                    requestAnimationFrame(updateCounter);
                                } else {
                                    counter.textContent = target + '+'; // Ensure final value has '+'
                                }
                            };
                            updateCounter();
                            observer.unobserve(counter); // Stop observing once animated
                        }
                    });
                }, { threshold: 0.5 }); // Trigger when 50% of the element is visible
                counters.forEach(counter => observer.observe(counter));
            }

            // Gemini API Integration - Get Project Ideas (Contact Form)
            async function getProjectIdeas() {
                const projectDetails = document.getElementById('contactMessage').value;
                const serviceType = document.getElementById('contactService').value;
                const llmResponseDiv = document.getElementById('llmResponse');
                const llmResponseContent = document.getElementById('llmResponseContent');
                const llmLoadingSpinner = document.getElementById('llmLoadingSpinner');

                if (!projectDetails.trim() || !serviceType.trim()) {
                    showMessageBox('Please provide project details and select a service to get ideas. ', 'info'); // Please provide project details and select a service to get ideas.  ‡§ï‡•É‡§™‡§Ø‡§æ ‡§µ‡§ø‡§ö‡§æ‡§∞ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§è‡§ï ‡§∏‡•á‡§µ‡§æ ‡§ö‡•Å‡§®‡•á‡§Ç
                    return;
                }

                llmResponseContent.innerHTML = ''; // Clear previous ideas
                llmResponseDiv.style.display = 'block'; // Show the container
                llmLoadingSpinner.style.display = 'block'; // Show spinner

                const prompt = `The user is planning a project for '${serviceType}' with the following details: '${projectDetails}'. Based on this, provide creative and practical ideas, design suggestions, or potential enhancements for their project. Focus on innovative solutions and aesthetic improvements. Keep the response concise and actionable, formatted as a bulleted list.`;

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });

                const payload = { contents: chatHistory };
                const apiKey = ""; // Canvas will automatically provide the API key
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        // Convert markdown list to HTML list
                        const htmlList = text.split('\n').map(line => {
                            if (line.startsWith('* ') || line.startsWith('- ')) {
                                return `<li>${line.substring(2).trim()}</li>`;
                            }
                            return line; // Return as is if not a list item
                        }).join('');
                        llmResponseContent.innerHTML = `<ul>${htmlList}</ul>`;
                    } else {
                        llmResponseContent.innerHTML = '<p>Could not generate ideas. Please try again.</p>'; // Could not generate ideas. Please try again.  ‡§ø‡§ö‡§æ‡§∞ ‡§â‡§§‡•ç‡§™‡§®‡•ç‡§® ‡§®‡§π‡•Ä‡§Ç ‡§ï‡§∞ ‡§∏‡§ï‡§æ‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§™‡•Å‡§®‡§É ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§∞‡•á‡§Ç‡•§
                        console.error('Gemini API response structure unexpected:', result);
                    }
                } catch (error) {
                    llmResponseContent.innerHTML = '<p>Error connecting to the idea generator. Please try again later.</p>'; // Error connecting to the idea generator. Please try again later.
                    console.error('Error calling Gemini API:', error);
                } finally {
                    llmLoadingSpinner.style.display = 'none'; // Hide spinner
                }
            }

            // Gemini API Integration - Service Elaborator/Summarizer (Services Section)
            async function handleServiceAction(actionType, serviceName, currentDescription, targetElementId, spinnerId) {
                const targetElement = document.getElementById(targetElementId);
                const spinner = document.getElementById(spinnerId);

                if (!targetElement || !spinner) {
                    console.error('Target element or spinner not found for service elaboration/summary.'); // Target element or spinner not found for service elaboration/summary. ‡§≤‡§ï‡•ç‡§∑‡•ç‡§Ø ‡§§‡§§‡•ç‡§µ ‡§Ø‡§æ ‡§∏‡•ç‡§™‡§ø‡§®‡§∞ ‡§∏‡•á‡§µ‡§æ ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞/‡§∏‡§æ‡§∞‡§æ‡§Ç‡§∂ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡§æ‡•§
                    return;
                }

                // Toggle visibility: if already visible, hide it and clear content
                if (targetElement.style.display === 'block') {
                    targetElement.style.display = 'none';
                    targetElement.innerHTML = '';
                    return;
                }

                targetElement.innerHTML = ''; // Clear previous content
                targetElement.style.display = 'block'; // Show the container
                spinner.style.display = 'block'; // Show spinner

                let prompt = '';
                if (actionType === 'elaborate') {
                    prompt = `Elaborate on the following service: '${serviceName}'. The current brief description is: '${currentDescription}'. Provide a more detailed and engaging description, highlighting its benefits, unique selling points, and what a client can expect. Keep it concise, around 2-3 paragraphs.`;
                } else if (actionType === 'summarize') {
                    prompt = `‡§á‡§∏ ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§ï‡•ã ‡§ú‡§º‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§∏‡§Ç‡§ï‡•ç‡§∑‡•á‡§™ ‡§Æ‡•á‡§Ç ‡§≤‡§ø‡§ñ‡•ã: '${serviceName}'. ‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§∏‡§Ç‡§ï‡•ç‡§∑‡§ø‡§™‡•ç‡§§ ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§π‡•à: '${currentDescription}'. ‡§≤‡§ó‡§≠‡§ó 50-60 ‡§∂‡§¨‡•ç‡§¶‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§∏‡§≠‡•Ä ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§¨‡§ø‡§Ç‡§¶‡•Å‡§ì‡§Ç ‡§ï‡•ã ‡§ï‡§µ‡§∞ ‡§ï‡§∞‡•ã, ‡§§‡§æ‡§ï‡§ø ‡§µ‡§ø‡§ú‡§ø‡§ü‡§∞‡•ç‡§∏ ‡§ï‡•ã ‡§ú‡§≤‡•ç‡§¶‡•Ä ‡§∏‡•á ‡§∏‡§Æ‡§ù ‡§Ü ‡§ú‡§æ‡§è‡•§`; // Summarize this service information more concisely. The current brief description is: '${currentDescription}'. Cover all main points in about 50-60 words, so visitors can quickly understand.
                }

                let chatHistory = [];
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });

                const payload = { contents: chatHistory };
                const apiKey = ""; // Canvas will automatically provide the API key
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        // For elaborate, convert newlines to paragraphs. For summarize, just set text.
                        if (actionType === 'elaborate') {
                            targetElement.innerHTML = text.split('\n\n').map(p => `<p>${p.trim()}</p>`).join('');
                        } else {
                            targetElement.textContent = text.trim(); // Display as plain text for summary
                        }
                    } else {
                        targetElement.innerHTML = '<p>Could not generate information. Please try again.</p>'; // Could not generate information. Please try again.
                        console.error('Gemini API response structure unexpected for service action:', result);
                    }
                } catch (error) {
                    targetElement.innerHTML = '<p>Error connecting to the information generator. Please try again later.</p>'; // Error connecting to the information generator. Please try again later.
                    console.error('Error calling Gemini API for service action:', error);
                } finally {
                    spinner.style.display = 'none'; // Hide spinner
                }
            }
            window.handleServiceAction = handleServiceAction; // Make globally accessible

            // Initialize all functionality
            try {
                initializeMobileMenu();
                updateThemeIcon(savedTheme); // Set initial icon based on saved theme
                initializeScrollEffect();
                initializeCalculator();
                initializeSmoothScroll();
                initializeFadeOnScroll();
                setupFormSubmission('homeContactForm'); // Initialize quick enquiry form
                setupFormSubmission('contactForm');    // Initialize main contact form
                initializeStatsCounter();
                initializeTypedText();

                // Attach event listener for the "Get Project Ideas" button
                const getIdeasBtn = document.getElementById('getIdeasBtn');
                if (getIdeasBtn) {
                    getIdeasBtn.addEventListener('click', getProjectIdeas);
                }

                // Attach event listeners for the new "Elaborate" and "Summarize" buttons in Services section
                document.querySelectorAll('.service-action-btn').forEach(button => {
                    button.addEventListener('click', function() {
                        const actionType = this.getAttribute('data-action');
                        const serviceName = this.getAttribute('data-service-name');
                        const serviceDesc = this.getAttribute('data-service-desc');
                        const targetId = this.getAttribute('data-target-id');
                        const spinnerId = this.getAttribute('data-spinner-id');
                        handleServiceAction(actionType, serviceName, serviceDesc, targetId, spinnerId);
                    });
                });

                console.log('MAD Associates - All scripts initialized successfully!');
            } catch (error) {
                console.error('Error initializing scripts:', error);
            }
        });
    </script>
</body>
</html>
